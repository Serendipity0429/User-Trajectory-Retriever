/* Dark Mode Overrides */
:root.dark-mode {
    --bs-body-bg: #2a2a2a;
    --bs-body-bg-light: #303133;  /* Lighter background */
    --bs-body-color: #f6f6f6;
    --bs-border-color: #444;
    --primary-accent-color: #82318E; /* Tsinghua Purple */
    --secondary-accent-color: #9C4DA8; /* Lighter Tsinghua Purple */
    --dark-color: #212529;
}

.dark-mode body, .dark-mode #content {
    background-color: var(--bs-body-bg) !important;
    color: var(--bs-body-color) !important;
}

.dark-mode .card,
.dark-mode .list-group-item,
.dark-mode .accordion-item,
.dark-mode .modal-content {
    background-color: var(--bs-body-bg-light);
    border: 1px solid var(--bs-border-color);
    color: var(--bs-body-color);
}

.dark-mode .navbar,
.dark-mode .sidebar-header,
.dark-mode #sidebar,
.dark-mode footer,
.dark-mode .accordion-button {
    background-color: #1e1e1e !important;
    color: var(--bs-body-color) !important;
}

.dark-mode #sidebar ul li a:hover, .dark-mode #sidebar ul li.active > a:hover {
    color: var(--bs-body-bg-light) !important;
}

.dark-mode a:not(.btn-view-task) {
    /* color: var(--primary-accent-color); */
    color: white !important;
}

/* .dark-mode a:not(.btn-view-task):hover {
    color: #9C4DA8;
} */

.dark-mode #sidebar a,
.dark-mode #sidebar p {
    color: #fff !important;
}

.dark-mode .accordion-button::after {
    filter: invert(1) grayscale(100%) brightness(200%);
}

.dark-mode img[src*="bootstrap-icons"] {
    filter: invert(1);
}

.dark-mode h1, .dark-mode h2:not(.text-success), .dark-mode h3, .dark-mode h4, .dark-mode h5, .dark-mode h6,
.dark-mode p {
    color: var(--bs-body-color) !important;
}

.dark-mode .text-success {
    color: #45c35e !important;
}

.dark-mode .text-warning {
    color: #ffb700 !important;
}

.dark-mode .text-muted {
    color: #adb5bd !important;
}

.dark-mode .bg-light {
    background-color: var(--bs-body-bg-light) !important;
}

.dark-mode .form-control {
    background-color: #3a3a3c !important;
    color: var(--bs-body-color) !important;
    border-color: var(--bs-border-color) !important;
}

.dark-mode .form-select {
    background-color: #3a3a3c !important;
    color: var(--bs-body-color) !important;
    border-color: var(--bs-border-color) !important;
    line-height: 1.5 !important;
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3e%3cpath fill='none' stroke='%23ffffff' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='m2 5 6 6 6-6'/%3e%3c/svg%3e");
}

.dark-mode .form-control::placeholder {
    color: #3a3a3c;
    opacity: 1;
}

.dark-mode .form-control:focus {
    background-color: #3a3a3c !important;
    color: var(--bs-body-color) !important;
    border-color: var(--primary-accent-color) !important;
    box-shadow: 0 0 0 0.25rem rgba(130, 49, 142, 0.5) !important;
}

.dark-mode .form-control.is-invalid {
    border-color: #dc3545 !important;
}

.dark-mode .bg-primary {
    background-color: #1e1e1e !important;
    color: #fff !important;
}

/* === Primary Button Overrides for Dark Mode === */
.dark-mode .btn-primary-custom:not(.btn-view-task) {
    background-color: var(--primary-accent-color) !important;
    border-color: var(--primary-accent-color) !important;
    color: #fff !important; /* White text on dark purple */
}


.dark-mode .btn-primary-custom:not(.btn-view-task):hover {
    background-color: #9C4DA8 !important;
    border-color: #9C4DA8 !important;
    color: #fff !important;
}

.dark-mode .btn-outline-primary {
    color: var(--primary-accent-color) !important;
    border-color: var(--primary-accent-color) !important;
}

.dark-mode .btn-check:checked + .btn-outline-primary,
.dark-mode .btn-outline-primary:hover {
    background-color: var(--primary-accent-color) !important;
    color: var(--dark-color) !important;
}

.dark-mode .btn-check:checked + .btn-outline-primary strong {
    color: inherit !important;
}

.dark-mode .btn-outline-secondary {
    color: #adb5bd !important;
    border-color: #adb5bd !important;
}

.dark-mode .btn-outline-secondary:hover {
    background-color: #adb5bd !important;
    color: #1e1e1e !important;
}

.dark-mode .btn-secondary {
    background-color: #6c757d !important;
    border-color: #6c757d !important;
    color: #fff !important;
}

.dark-mode .btn-link {
    color: var(--primary-accent-color) !important;
}   


.dark-mode .drag-option:hover {
    border-color: var(--primary-accent-color) !important;
}

.dark-mode .drag-option .form-check-input:checked + .drag-handle + .priority-number + span,
.dark-mode .drag-option .form-check-input:checked + .drag-handle + .priority-number + span + div > span {
    color: var(--dark-color) !important;
}

.dark-mode .drag-option .form-check-input:checked ~ .flex-grow-1 {
    color: var(--dark-color) !important;
}

.dark-mode .drag-option .form-check-input:checked ~ * {
    color: var(--dark-color) !important;
}



.dark-mode .drag-option.list-group-item:has(.form-check-input:checked) {
    background-color: var(--primary-accent-color) !important;
    border-color: var(--primary-accent-color) !important;
    color: var(--dark-color) !important;
}

.dark-mode .drag-option.list-group-item:has(.form-check-input:checked) * {
    color: var(--dark-color) !important;
}

.dark-mode .drag-handle, .dark-mode .tooltip-icon {
    color: #adb5bd;
}

.dark-mode .tooltip-text {
    color: #fff !important;
}

.dark-mode .tooltip-text * {
    color: #fff !important;
}

.dark-mode .tooltip .tooltip-inner {
    background-color: var(--bs-body-bg-light);
    color: #fff;
    border: 1px solid #555;
}

.dark-mode .tooltip .tooltip-arrow::before {
    border-top-color: var(--bs-body-bg-light);
}

/* Success colors for dark mode */
.dark-mode .text-success-light {
    color: #1cc88a !important;
}

.dark-mode .bg-success-light {
    background-color: #1c7430 !important;
    color: #fff !important;
}

.dark-mode .bg-warning {
    background-color: #b37700 !important;
    color: #fff !important;
}

.dark-mode .nav-tabs {
    border-bottom-color: #444 !important;
}

.dark-mode .nav-link {
    color: #adb5bd !important;
    border-color: transparent transparent #444 transparent !important;
}

.dark-mode .nav-link.active,
.dark-mode .nav-link:focus,
.dark-mode .nav-link:hover {
    color: var(--primary-accent-color) !important;
    border-color: #444 #444 #343434 #444 !important;
}

.dark-mode .badge.bg-warning {
    background-color: #ffb700 !important;
    color: #fff !important;
}

.dark-mode .badge.bg-success {
    background-color: #1c7430 !important;
    color: #fff !important;
}

.dark-mode .list-group-item-success {
    background-color: #1c7430 !important;
    color: #fff !important;
    border-color: #1c7430 !important;
}

.dark-mode .alert-danger {
    background-color: #58151c !important;
    color: #f8d7da !important;
    border-color: #842029 !important;
}

.dark-mode .form-control:disabled {
    background-color: #252525 !important;
    color: #888 !important;
    opacity: 0.7;
}


.dark-mode .form-control:-webkit-autofill,
.dark-mode .form-control:-webkit-autofill:hover,
.dark-mode .form-control:-webkit-autofill:focus,
.dark-mode .form-control:-webkit-autofill:active {
    -webkit-box-shadow: 0 0 0 30px #3a3a3c inset !important;
    -webkit-text-fill-color: var(--bs-body-color) !important;
}

.dark-mode .form-floating > .form-control:-webkit-autofill,
.dark-mode .form-floating > .form-control:-webkit-autofill:hover,
.dark-mode .form-floating > .form-control:-webkit-autofill:focus,
.dark-mode .form-floating > .form-control:-webkit-autofill:active {
    -webkit-box-shadow: 0 0 0 30px #3a3a3c inset !important;
    -webkit-text-fill-color: var(--bs-body-color) !important;
}

.dark-mode .form-floating > label {
    color: #adb5bd;
}

.dark-mode .bg-white {
    background-color: #3a3a3c !important;
}

.dark-mode .question-text {
    color: var(--bs-body-color) !important;
}

.dark-mode .form-floating > .form-control:not(:placeholder-shown) ~ label span,
.dark-mode .form-floating > .form-control:focus ~ label span {
    color: #adb5bd;
}

.dark-mode .form-floating > .form-control:not(:placeholder-shown) ~ label::before,
.dark-mode .form-floating > .form-select.has-value ~ label::before,
.dark-mode .form-floating > .form-select:not(:placeholder-shown) ~ label::before,
.dark-mode .form-floating > .form-control:focus ~ label::before,
.dark-mode .form-floating > .form-select:focus ~ label::before {
    content: "";
    position: absolute;
    top: 50%;
    left: -0.25rem;
    transform: translateY(-50%);
    width: calc(100% + 0.5rem);
    height: 1.25rem;
    background-color: #3a3a3c;
    border-radius: 0.25rem;
    z-index: -1;
}

.dark-mode .form-floating > .form-control:not(:placeholder-shown) ~ label,
.dark-mode .form-floating > .form-select.has-value ~ label,
.dark-mode .form-floating > .form-select:not(:placeholder-shown) ~ label,
.dark-mode .form-floating > .form-control:focus ~ label,
.dark-mode .form-floating > .form-select:focus ~ label {
    color: #adb5bd;
}

.dark-mode .form-floating > label > span {
    color: transparent;
}

.dark-mode #sidebarCollapse, #pageSettingsDropdown {
    color: #adb5bd;
}


.dark-mode .justification-url {
    color: var(--primary-accent-color) !important;
}

.dark-mode #sidebarCollapse:hover {
    color: #e0e0e0;
}

.dark-mode .bg-custom-dark-blue {
    background-color: #1e1e1e;
}

.dark-mode .btn-custom-dark-blue {
    background-color: var(--primary-accent-color);
    border-color: var(--primary-accent-color);
    color: #fff;
}

.dark-mode .btn-custom-dark-blue:hover {
    background-color: #9C4DA8;
    border-color: #9C4DA8;
}

.dark-mode .btn-outline-custom-dark-blue {
    color: var(--primary-accent-color);
    border-color: var(--primary-accent-color);
}

.dark-mode .btn-check:not(:checked) + .btn-outline-custom-dark-blue:hover {
    color: #9C4DA8;
    background-color: rgba(130, 49, 142, 0.1); /* Subtle hover glow */
    border-color: #9C4DA8;
}

.dark-mode .btn-check:checked + .btn-outline-custom-dark-blue {
    color: var(--dark-color); /* Dark color for selected text */
    background-color: var(--primary-accent-color);
    border-color: var(--primary-accent-color);
}

.dark-mode .btn-check:checked + .btn-outline-custom-dark-blue {
    color: var(--dark-color); /* Dark color for selected text */
}

.dark-mode .btn-check:checked + .btn-outline-custom-dark-blue strong {
    color: inherit !important; /* Inherit the dark color from the parent label */
}

.dark-mode .btn-check:checked + .btn-outline-custom-dark-blue:hover {
    color: var(--dark-color); /* Keep text dark */
    background-color: #9C4DA8; /* Lighter accent color on hover */
    border-color: #9C4DA8;
}

.dark-mode .light-mode-elements {
    display: none;
}

.dark-mode .dark-mode-elements {
    display: inline-flex;
    align-items: center;
}

/* Elegant selection for dark mode */
.dark-mode ::selection {
    background-color: var(--primary-accent-color);
    color: var(--dark-color); /* Dark color for selected text */
}

/* Custom radio and checkbox styling for dark mode */
.dark-mode .form-check-input {
    background-color: #3a3a3c;
    border-color: var(--bs-border-color);
}

.dark-mode .form-check-input:hover {
    border-color: var(--primary-accent-color);
}

.dark-mode .form-check-input:checked {
    background-color: var(--secondary-accent-color);
    border-color: var(--secondary-accent-color);
}

.dark-mode .form-check-input:checked:hover {
    background-color: var(--secondary-accent-color);
    border-color: var(--secondary-accent-color);
}

.dark-mode .text-danger {
    color: #ffcc3e !important;
}

.dark-mode .editor-preview {
    background-color: var(--bs-body-bg);
}


.dark-mode .CodeMirror, .dark-mode .editor-toolbar {
    background-color: var(--bs-body-bg-light);
    color: var(--bs-body-color);
}

/* Bootstrap Button Overrides for Dark Mode */
.dark-mode .btn-primary {
    background-color: var(--primary-accent-color) !important;
    border-color: var(--primary-accent-color) !important;
    color: #fff !important; /* White text on dark purple */
}

.dark-mode .btn-primary:hover {
    background-color: #9C4DA8 !important; /* Slightly lighter purple on hover */
    border-color: #9C4DA8 !important;
    color: #fff !important;
}

/* View Task button */
.dark-mode .btn-view-task,
.dark-mode .btn-view-task.btn-primary {
    background-color: var(--primary-accent-color) !important;
    border-color: var(--primary-accent-color) !important;
    color: #fff !important; /* White text on dark purple */
}

.dark-mode .btn-view-task:hover,
.dark-mode .btn-view-task.btn-primary:hover {
    background-color: #9C4DA8 !important;
    border-color: #9C4DA8 !important;
    color: #fff !important;
}

.dark-mode .btn-secondary:hover {
    background-color: #5a6268 !important; /* Darker secondary on hover */
    border-color: #5a6268 !important;
}

.dark-mode .btn-info {
    background-color: #17a2b8 !important; /* Bootstrap info color */
    border-color: #17a2b8 !important;
    color: #fff !important;
}

.dark-mode .btn-info:hover {
    background-color: #138496 !important;
    border-color: #138496 !important;
}

.dark-mode .btn-success {
    background-color: #28a745 !important; /* Bootstrap success color */
    border-color: #28a745 !important;
    color: #fff !important;
}

.dark-mode .btn-success:hover {
    background-color: #218838 !important;
    border-color: #218838 !important;
}

.dark-mode .btn-warning {
    background-color: #ffc107 !important; /* Bootstrap warning color */
    border-color: #ffc107 !important;
    color: var(--dark-color) !important; /* Dark text for warning */
}

.dark-mode .btn-warning:hover {
    background-color: #e0a800 !important;
    border-color: #e0a800 !important;
}

.dark-mode .btn-danger {
    background-color: #dc3545 !important; /* Bootstrap danger color */
    border-color: #dc3545 !important;
    color: #fff !important;
}

.dark-mode .btn-danger:hover {
    background-color: #c82333 !important;
    border-color: #c82333 !important;
}

.dark-mode .btn-light {
    background-color: var(--bs-body-bg-light) !important;
    border-color: var(--bs-border-color) !important;
    color: var(--bs-body-color) !important;
}

.dark-mode .btn-light:hover {
    background-color: #5a6268 !important; /* Darker secondary on hover */
    border-color: #5a6268 !important;
}


.dark-mode .fa {
    color: var(--bs-body-color) !important
}

.dark-mode .page-link {
    color: var(--bs-body-color) !important;
    background-color: var(--bs-body-bg) !important;
    border-color: #444 !important;
}

.dark-mode .page-link:hover {
    color: var(--primary-accent-color) !important;
    background-color: var(--bs-body-bg-light) !important;
    border-color: #444 !important;
}

.dark-mode .page-item.active .page-link {
    background-color: var(--primary-accent-color) !important;
    border-color: var(--primary-accent-color) !important;
    color: #fff !important; /* White text on dark purple */
}

.dark-mode button.active .fa, .dark-mode button.active:hover .fa {
    color: var(--bs-body-bg) !important;
}

/* ==========================================================================
   Discussion App Dark Mode
   ========================================================================== */

/* Discussion page headings */
.dark-mode .discussion-page h1,
.dark-mode .discussion-page h2,
.dark-mode .discussion-page h3,
.dark-mode .discussion-page h4,
.dark-mode .discussion-page h5,
.dark-mode .discussion-page h6,
.dark-mode .discussion-page b {
    color: var(--bs-body-color) !important;
}

/* Create post form */
.dark-mode .create-post-form {
    background: var(--bs-body-bg-light);
    box-shadow: 0 2px 4px rgba(0,0,0,.3);
}

/* Discussion labels */
.dark-mode .discussion-label {
    background-color: var(--bs-body-bg);
    color: var(--primary-accent-color);
}

/* Attachment items */
.dark-mode .attachment-item {
    background-color: var(--bs-body-bg);
    border-color: var(--bs-border-color);
}

.dark-mode .attachment-item:hover {
    background-color: var(--bs-body-bg-light);
}

.dark-mode .attachment-item i {
    color: #adb5bd;
}

/* Discussion category badges - outline variants */
.dark-mode .badge-outline-warning-custom {
    color: #ffb700;
    border-color: #ffb700;
}

.dark-mode .badge-outline-important-custom {
    color: #ff6b6b;
    border-color: #ff6b6b;
}

.dark-mode .badge-outline-update-custom {
    color: var(--primary-accent-color);
    border-color: var(--primary-accent-color);
}

.dark-mode .badge-outline-general-custom {
    color: #adb5bd;
    border-color: #adb5bd;
}

.dark-mode .badge-outline-feedback-custom {
    color: #b39ddb;
    border-color: #b39ddb;
}

.dark-mode .badge-outline-issues-custom {
    color: #ff8a80;
    border-color: #ff8a80;
}

/* Discussion category badges - modern style */
.dark-mode .badge-discussion-purple {
    color: #b39ddb;
    background-color: rgba(179, 157, 219, 0.15);
    border-color: rgba(179, 157, 219, 0.3);
}

.dark-mode .badge-discussion-pink {
    color: #f48fb1;
    background-color: rgba(244, 143, 177, 0.15);
    border-color: rgba(244, 143, 177, 0.3);
}

.dark-mode .badge-discussion-teal {
    color: #4db6ac;
    background-color: rgba(77, 182, 172, 0.15);
    border-color: rgba(77, 182, 172, 0.3);
}

.dark-mode .badge-discussion-lime {
    color: #aed581;
    background-color: rgba(174, 213, 129, 0.15);
    border-color: rgba(174, 213, 129, 0.3);
}

.dark-mode .badge-discussion-orange {
    color: #ffb74d;
    background-color: rgba(255, 183, 77, 0.15);
    border-color: rgba(255, 183, 77, 0.3);
}

/* Discussion button outline variants */
.dark-mode .btn-outline-discussion-purple {
    color: #b39ddb;
    border-color: #b39ddb;
}

.dark-mode .btn-outline-discussion-purple:hover {
    background-color: #b39ddb;
    color: var(--dark-color);
}

.dark-mode .btn-outline-discussion-pink {
    color: #f48fb1;
    border-color: #f48fb1;
}

.dark-mode .btn-outline-discussion-pink:hover {
    background-color: #f48fb1;
    color: var(--dark-color);
}

.dark-mode .btn-outline-discussion-teal {
    color: #4db6ac;
    border-color: #4db6ac;
}

.dark-mode .btn-outline-discussion-teal:hover {
    background-color: #4db6ac;
    color: var(--dark-color);
}

.dark-mode .btn-outline-discussion-lime {
    color: #aed581;
    border-color: #aed581;
}

.dark-mode .btn-outline-discussion-lime:hover {
    background-color: #aed581;
    color: var(--dark-color);
}

.dark-mode .btn-outline-discussion-orange {
    color: #ffb74d;
    border-color: #ffb74d;
}

.dark-mode .btn-outline-discussion-orange:hover {
    background-color: #ffb74d;
    color: var(--dark-color);
}


/* Metric cards */
.dark-mode .metric-card {
    background-color: var(--bs-body-bg-light) !important;
    border-color: var(--bs-border-color) !important;
}

.dark-mode .metric-card:hover {
    box-shadow: 0 .5rem 1rem rgba(0,0,0,.3) !important;
}

.dark-mode .metric-card .card-body {
    background-color: var(--bs-body-bg-light) !important;
}

.dark-mode .metric-value {
    color: var(--bs-body-color) !important;
}

.dark-mode .metric-label {
    color: #adb5bd !important;
}

/* Section headers */
.dark-mode .section-header {
    color: var(--bs-body-color);
}

.dark-mode .metrics-group-details summary {
    color: var(--bs-body-color);
}

.dark-mode .metrics-group-details summary::after {
    background: var(--bs-border-color);
}

/* Table styles */
.dark-mode .table-success-light {
    --bs-table-bg: rgba(40, 167, 69, 0.2);
    --bs-table-color: var(--bs-body-color);
}

.dark-mode .table-danger-light {
    --bs-table-bg: rgba(220, 53, 69, 0.2);
    --bs-table-color: var(--bs-body-color);
}

.dark-mode .text-success-dark {
    color: #45c35e;
}

.dark-mode .text-danger-dark {
    color: #ff6b6b;
}

/* Text emphasis colors for dark mode */
.dark-mode .text-primary-emphasis {
    color: var(--primary-accent-color);
}

.dark-mode .text-success-emphasis {
    color: #45c35e;
}

.dark-mode .text-danger-emphasis {
    color: #ff6b6b;
}

.dark-mode .text-info-emphasis {
    color: #4dd0e1;
}

.dark-mode .text-warning-emphasis {
    color: #ffb74d;
}

.dark-mode .text-secondary-emphasis {
    color: #adb5bd;
}

.dark-mode .text-purple-emphasis {
    color: #b39ddb;
}

/* Table header sticky */
.dark-mode .table-responsive thead th {
    background-color: var(--bs-body-bg-light);
}

/* Chat bubbles */
.dark-mode .message-bubble {
    background-color: var(--bs-body-bg-light);
}

.dark-mode .message-bubble pre,
.dark-mode .message-bubble code {
    background-color: var(--bs-body-bg);
    color: var(--bs-body-color);
}

/* Agent step components */
.dark-mode .tool-content {
    background-color: var(--bs-body-bg) !important;
    color: var(--bs-body-color) !important;
    border-color: var(--bs-border-color) !important;
}

.dark-mode .obs-content {
    background-color: var(--bs-body-bg-light) !important;
    color: #adb5bd !important;
    border-color: var(--bs-border-color) !important;
}

/* Gradient backgrounds for dark mode */
.dark-mode .bg-gradient-blue {
    background: linear-gradient(135deg, rgba(77, 208, 225, 0.1) 0%, rgba(77, 208, 225, 0.05) 100%);
}

.dark-mode .bg-gradient-green {
    background: linear-gradient(135deg, rgba(69, 195, 94, 0.1) 0%, rgba(69, 195, 94, 0.05) 100%);
}

/* Session items */
.dark-mode .session-item {
    border-color: var(--bs-border-color) !important;
}

.dark-mode .session-item:hover {
    background-color: var(--bs-body-bg-light);
}

/* Compact cell */
.dark-mode .compact-cell {
    background-color: var(--bs-body-bg);
}

/* ==========================================================================
   Dashboard App Dark Mode
   ========================================================================== */

/* Dashboard statistics cards */
.dark-mode .dashboard .card-header {
    background-color: var(--bs-body-bg) !important;
}

/* Chart backgrounds - make transparent for dark mode */
.dark-mode canvas {
    filter: none;
}

/* Card body with bg-light */
.dark-mode .card-body .bg-light {
    background-color: var(--bs-body-bg) !important;
}

/* Border accents for dark mode */
.dark-mode .border-start {
    border-color: inherit !important;
}

/* KPI cards in dashboard */
.dark-mode .card.border-start.border-4 {
    background-color: var(--bs-body-bg-light);
}

/* Text colors in dashboard cards */
.dark-mode .text-primary {
    color: var(--primary-accent-color) !important;
}

.dark-mode .text-dark {
    color: var(--bs-body-color) !important;
}

/* Metric definitions card */
.dark-mode .card.bg-light.border-0 {
    background-color: var(--bs-body-bg) !important;
}

.dark-mode .card.bg-light.border-0 .text-dark {
    color: var(--bs-body-color) !important;
}

/* Modal body bg-light */
.dark-mode .modal-body.bg-light {
    background-color: var(--bs-body-bg) !important;
}

/* Consent content preview */
.dark-mode #consent-content {
    background-color: var(--bs-body-bg-light);
}

/* Task filter toggle */
.dark-mode .task-filter-toggle {
    background-color: var(--bs-body-bg-light);
    color: var(--bs-body-color);
}

/* ==========================================================================
   Message System Dark Mode
   ========================================================================== */

.dark-mode .message-item {
    background-color: var(--bs-body-bg-light);
    border-color: var(--bs-border-color);
}

.dark-mode .message-item:hover {
    background-color: var(--bs-body-bg);
}

.dark-mode .message-unread {
    border-left-color: var(--primary-accent-color);
}

/* ==========================================================================
   Bootstrap Table Dark Mode Enhancements
   ========================================================================== */

.dark-mode .table {
    --bs-table-bg: transparent;
    --bs-table-color: var(--bs-body-color);
    --bs-table-border-color: var(--bs-border-color);
}

.dark-mode .table > thead {
    background-color: var(--bs-body-bg-light);
}

.dark-mode .table-striped > tbody > tr:nth-of-type(odd) > * {
    --bs-table-accent-bg: rgba(255, 255, 255, 0.02);
}

.dark-mode .table-hover > tbody > tr:hover > * {
    --bs-table-accent-bg: rgba(255, 255, 255, 0.05);
}


/* Leaderboard */
.dark-mode #leaderboard-container {
    background-color: var(--bs-body-bg-light) !important;
}

.dark-mode .leaderboard-controls {
    background-color: var(--bs-body-bg) !important;
    border-color: var(--bs-border-color) !important;
}

.dark-mode .leaderboard-entry {
    border-color: var(--bs-border-color) !important;
}

.dark-mode .leaderboard-entry:hover {
    background-color: var(--bs-body-bg) !important;
}

.dark-mode .leaderboard-entry.active {
    background-color: rgba(130, 49, 142, 0.2) !important;
    border-left-color: var(--primary-accent-color) !important;
}

.dark-mode .leaderboard-rank.default {
    background-color: var(--bs-body-bg) !important;
    color: var(--bs-body-color) !important;
    border-color: var(--bs-border-color) !important;
}

/* History Section Headers */
.dark-mode .history-section .section-header {
    background: var(--bs-body-bg) !important;
    border-color: var(--bs-border-color) !important;
}

.dark-mode .pipeline-runs-section .section-header {
    background: linear-gradient(135deg, rgba(130, 49, 142, 0.15) 0%, rgba(130, 49, 142, 0.08) 100%) !important;
}

.dark-mode .single-sessions-section .section-header {
    background: linear-gradient(135deg, rgba(40, 167, 69, 0.15) 0%, rgba(40, 167, 69, 0.08) 100%) !important;
}

/* Select all rows */
.dark-mode .select-all-row {
    background-color: var(--bs-body-bg) !important;
    border-color: var(--bs-border-color) !important;
}

/* Session list inner */
.dark-mode .session-list-inner {
    background-color: var(--bs-body-bg-light) !important;
}

/* Session items */
.dark-mode .session-item {
    border-color: var(--bs-border-color) !important;
}

.dark-mode .session-item:hover {
    background-color: var(--bs-body-bg) !important;
}

/* Group items */
.dark-mode .group-item {
    border-color: var(--bs-border-color) !important;
}

.dark-mode .group-header:hover {
    background-color: var(--bs-body-bg) !important;
}

/* Processing row */
.dark-mode .processing-row,
.dark-mode .table-light {
    background-color: var(--bs-body-bg-light) !important;
    --bs-table-bg: var(--bs-body-bg-light) !important;
}

/* Modal search result items */
.dark-mode .list-group-item.bg-white,
.dark-mode #tpl-modal-search-result-item .bg-white {
    background-color: var(--bs-body-bg-light) !important;
}

/* Agent action tool content */
.dark-mode .tool-content.bg-white {
    background-color: var(--bs-body-bg-light) !important;
}

/* Thinking process */
.dark-mode .thinking-content {
    background-color: var(--bs-body-bg) !important;
    border-color: #ffc107 !important;
}

/* Full content body in modals */
.dark-mode .full-content-body {
    background-color: var(--bs-body-bg) !important;
}

/* Result link badges */
.dark-mode .badge.bg-light {
    background-color: var(--bs-body-bg) !important;
    color: var(--bs-body-color) !important;
}

/* Search observation cards */
.dark-mode .obs-content .bg-white {
    background-color: var(--bs-body-bg-light) !important;
}

/* Final answer card */
.dark-mode .final-answer-card {
    border-color: var(--primary-accent-color) !important;
}

.dark-mode .final-answer-card .text-primary {
    color: var(--primary-accent-color) !important;
}

.dark-mode .response-text.text-dark {
    color: var(--bs-body-color) !important;
}

/* Input group text */
.dark-mode .input-group-text {
    background-color: var(--bs-body-bg-light) !important;
    border-color: var(--bs-border-color) !important;
    color: var(--bs-body-color) !important;
}

/* Card headers */
.dark-mode .card-header {
    background-color: var(--bs-body-bg) !important;
    border-color: var(--bs-border-color) !important;
}

/* Pipeline badges with primary color */
.dark-mode .badge.bg-primary {
    background-color: var(--primary-accent-color) !important;
    color: #fff !important;
}

/* Trial verdict cards */
.dark-mode .trial-verdict-container .card {
    background-color: var(--bs-body-bg-light) !important;
}

/* Run config items */
.dark-mode .config-col .bg-white {
    background-color: var(--bs-body-bg-light) !important;
}

.dark-mode .config-col .border {
    border-color: var(--bs-border-color) !important;
}

/* Run config card */
.dark-mode #run-config-card {
    background-color: var(--bs-body-bg) !important;
}

/* Turn labels */
.dark-mode .turn-label {
    background-color: rgba(130, 49, 142, 0.15) !important;
    color: var(--primary-accent-color) !important;
    border-color: rgba(130, 49, 142, 0.3) !important;
}

/* Turn dividers */
.dark-mode .turn-divider-line {
    border-color: var(--bs-border-color) !important;
}

/* Table light header */
.dark-mode .table-light,
.dark-mode thead.table-light {
    background-color: var(--bs-body-bg-light) !important;
    --bs-table-bg: var(--bs-body-bg-light) !important;
    color: var(--bs-body-color) !important;
}

.dark-mode thead.table-light th {
    background-color: var(--bs-body-bg-light) !important;
    color: #adb5bd !important;
}

/* Border opacity utilities */
.dark-mode .border-primary {
    border-color: var(--primary-accent-color) !important;
}

/* Alert and info icons */
.dark-mode .bi {
    color: inherit;
}

/* No session selected placeholder */
.dark-mode #no-session-selected .bi {
    color: #555 !important;
}

/* Empty state */
.dark-mode .empty-state .bi {
    color: #555 !important;
}

/* Message bubble backgrounds */
.dark-mode .message-bubble-content {
    background-color: var(--bs-body-bg-light) !important;
    border-color: var(--bs-border-color) !important;
}

/* Avatar circles */
.dark-mode .avatar-circle {
    background-color: var(--bs-body-bg-light) !important;
}

/* btn-outline variants for dark mode */
.dark-mode .btn-outline-info {
    color: #4dd0e1 !important;
    border-color: #4dd0e1 !important;
}

.dark-mode .btn-outline-info:hover {
    background-color: #4dd0e1 !important;
    color: #212529 !important;
}

.dark-mode .btn-outline-primary {
    color: var(--primary-accent-color) !important;
    border-color: var(--primary-accent-color) !important;
}

.dark-mode .btn-outline-primary:hover {
    background-color: var(--primary-accent-color) !important;
    color: #fff !important;
}

/* Override inline styles for history sections */
.dark-mode [style*="background-color: #f8fbff"],
.dark-mode [style*="background-color: #f8fdf9"],
.dark-mode [style*="background-color: #fafbfc"],
.dark-mode [style*="background-color: #f8f9fa"] {
    background-color: var(--bs-body-bg) !important;
}

.dark-mode [style*="border-bottom: 1px solid #f0f0f0"],
.dark-mode [style*="border-bottom: 1px solid #e9ecef"] {
    border-color: var(--bs-border-color) !important;
}

/* Override inline gradient backgrounds */
.dark-mode [style*="linear-gradient(135deg, #e8f4fd"],
.dark-mode [style*="linear-gradient(135deg, #f0fdf4"] {
    background: var(--bs-body-bg) !important;
}

/* ==========================================================================
   Leaderboard Table Dark Mode
   ========================================================================== */

/* Leaderboard table hover in dark mode */
.dark-mode #leaderboard-table tbody tr:hover {
    background-color: rgba(255, 255, 255, 0.08) !important;
}

.dark-mode #leaderboard-table tbody tr.active {
    background-color: rgba(130, 49, 142, 0.25) !important;
}

.dark-mode .human-baseline-row {
    background-color: var(--bs-body-bg) !important;
}

.dark-mode .human-baseline-row:hover {
    background-color: var(--bs-body-bg-light) !important;
}

.dark-mode .leaderboard-rank-badge.default {
    background-color: var(--bs-body-bg-light) !important;
    color: var(--bs-body-color) !important;
}
